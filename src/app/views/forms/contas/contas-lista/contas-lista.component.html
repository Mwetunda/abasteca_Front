<div *ngIf="progressBar">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>
<mat-card class="p-0">
    <mat-card-title>
        <div class="flex-x-btw flex-y-center pl-1 ">
            <p class="pr-1 pr-1 mb-0 txt-primary">
                <span (click)="mostrarFiltros = !mostrarFiltros"
                    style="display: flex; align-items: center; cursor: pointer">
                    <span>Contas</span>
                    <mat-icon [innerText]="mostrarFiltros ? 'expand_more' : 'expand_less'"></mat-icon>
                </span>
            </p>
        </div>
    </mat-card-title>

    <mat-card-content class="mb-16 mt-0" *ngIf="mostrarFiltros">
        <form [formGroup]="filtroForm" (submit)="filtrar()">
            <div fxLayout="row wrap" class="filtro_container" fxLayout.xs="column">
                <div fxFlex="15" fxFlex.xl="12.5" fxFlex.lg="12.5" fxFlex.gt-xs="50" fxFlex.xs="30" class="pl-1 pr-1">
                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Nome</mat-label>
                        <input matInput name="Nome" formControlName="nome" placeholder="Nome" />
                    </mat-form-field>
                </div>

                <div fxFlex="20" fxFlex.xl="12" fxFlex.lg="15" fxFlex.gt-xs="30" fxFlex.md="50" fxFlex.sm="50"
                    fxFlex.xs="100" class="pl-1 pr-1">
                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Província</mat-label>
                        <mat-select formControlName="idEstado" matNativeControl multiple>
                            <mat-option [value]="0">Seleccione</mat-option>
                            <mat-option *ngFor="let item of provincias" [value]="item.idProvincia">
                                {{item.designacao}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div fxFlex="100" fxFlex.xl="15" fxFlex.lg="15" fxFlex.gt-xs="20" fxFlex.xs="30" class="pl-1 pr-1">
                    <div class="flex flex-y-center pt-03 h-100">

                        <button mat-raised-button color="primary" type="submit" class="btn-filter">
                            <mat-icon>search</mat-icon>
                        </button>

                        <button class="ml-05 btn-filter" mat-raised-button color="primary" type="reset"
                            (click)="limparFiltro()">
                            <mat-icon>cancel</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </mat-card-content>
</mat-card>

<div fxLayout="row wrap">
    <div *ngFor="let user of users" fxFlex="30" fxFlex.xl="30" fxFlex.lg="25" fxFlex.gt-xs="25" fxFlex.gt-sm="25" fxFlex.md="33" fxFlex.sm="50" fxFlex.xs="100">
        <mat-card class="user-card p-0">
            <mat-card-title class="mb-16">
                <div class="card-title-text">
                    <a href="" class="toolbar-avatar sm mr-16"><img [src]="user.foto" alt=""></a>
                    <span class="text-16">{{user.nome}}</span>
                    <span fxFlex></span>
                    <button mat-icon-button [matMenuTriggerFor]="userMenu" class="">
                        <mat-icon class="text-muted text-18">more_vert</mat-icon>
                    </button>
                    <mat-menu #userMenu="matMenu">
                        <button mat-menu-item (click)="abrirModalOperador(user, 'D')">Ver Detalhe</button>
                        <button mat-menu-item>Enviar e-mail</button>
                        <button mat-menu-item>
                            <span>{{user?.estado ? 'Desactivar' : 'Activar'}}</span>
                        </button>
                        <button mat-menu-item>Remover</button>

                    </mat-menu>
                </div>
                <mat-divider></mat-divider>
            </mat-card-title>
            <mat-card-content>
                <!-- user detail lines-->
                <div class="user-details">
                    <p><mat-icon class="text-muted text-18 pl-1">phone</mat-icon>{{user.telefone}}</p>
                    <p><mat-icon class="text-muted text-18 pl-1">mail</mat-icon>{{user.email}}</p>
                    <p><mat-icon class="text-muted text-18 pl-1">date_range</mat-icon>Usuário desde {{user.dataCriacao | date}}</p>
                    <p><mat-icon class="text-muted text-18 pl-1 pb-1">location_on</mat-icon>{{user.provinciaResidencia}}</p>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>